# B ç«™éŸ³è§†é¢‘ä¸‹è½½å™¨

> æ”¯æŒä¸‹è½½åˆé›†ä¸­çš„æ‰€æœ‰è§†é¢‘æ–‡ä»¶ä»¥åŠå•ä¸ªè§†é¢‘ä¸­çš„éŸ³è§†é¢‘æ–‡ä»¶

## åŠŸèƒ½ç‰¹æ€§

- ğŸµ æ”¯æŒå•ä¸ªè§†é¢‘å’Œåˆé›†æ‰¹é‡ä¸‹è½½
- ğŸ”§ å®Œå–„çš„é…ç½®ç®¡ç†å’ŒéªŒè¯
- ğŸ“ è¯¦ç»†çš„æ—¥å¿—è®°å½•
- âš¡ å¼‚å¸¸å¤„ç†å’Œé”™è¯¯æ¢å¤
- ğŸ“ è‡ªåŠ¨åˆ›å»ºä¸‹è½½ç›®å½•
- ğŸ”„ å¯é…ç½®çš„ä¸‹è½½é€‰é¡¹

## å®‰è£…ä¾èµ–
> pip install requests configparser

## ä½¿ç”¨è¯´æ˜

### 1. å‡†å¤‡å·¥ä½œ

1. ä¸‹è½½ [BBDown](https://github.com/nilaoda/BBDown) å¹¶æ”¾ç½®åˆ°æŒ‡å®šè·¯å¾„
2. ä¿®æ”¹ [config.ini](./config.ini) é…ç½®æ–‡ä»¶

### 2. é…ç½®æ–‡ä»¶è¯¦è§£

#### åŸºæœ¬é…ç½®é¡¹

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ | ç¤ºä¾‹                              |
|--------|------|------|--------|------|---------------------------------|
| `ddown_path` | å­—ç¬¦ä¸² | æ˜¯ | æ—  | BBDownç¨‹åºçš„å®Œæ•´è·¯å¾„ | `D:/Programs/BBDown/BBDown.exe` |
| `cookie` | å­—ç¬¦ä¸² | æ˜¯ | æ—  | Bç«™ç™»å½•cookie | é•¿å­—ç¬¦ä¸²cookieå€¼                     |
| `bvid` | å­—ç¬¦ä¸² | æ˜¯ | æ—  | è¦ä¸‹è½½çš„è§†é¢‘BVå· | `xxxyyyzzz`                     |

#### ä¸‹è½½æ¨¡å¼é…ç½®

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ | å¯é€‰å€¼ |
|--------|------|------|--------|------|--------|
| `season_download` | å¸ƒå°” | å¦ | `0` | æ˜¯å¦å¯ç”¨åˆé›†ä¸‹è½½æ¨¡å¼ | `1`(æ˜¯) æˆ– `0`(å¦) |
| `current_only` | å¸ƒå°” | å¦ | `0` | æ˜¯å¦ä»…ä¸‹è½½å½“å‰è§†é¢‘(ä¸åˆ†P) | `1`(æ˜¯) æˆ– `0`(å¦) |
| `audio_only` | å¸ƒå°” | å¦ | `1` | æ˜¯å¦ä»…ä¸‹è½½éŸ³é¢‘ | `1`(æ˜¯) æˆ– `0`(å¦) |

#### åˆé›†ä¸‹è½½ä¸“ç”¨é…ç½®

å½“ `season_download=1` æ—¶ï¼Œä»¥ä¸‹é…ç½®é¡¹ä¸ºå¿…å¡«ï¼š

| é…ç½®é¡¹ | ç±»å‹ | å¿…å¡« | è¯´æ˜ | è·å–æ–¹å¼ |
|--------|------|------|------|----------|
| `mid` | å­—ç¬¦ä¸² | æ˜¯ | UPä¸»ID | ä»UPä¸»ä¸»é¡µURLè·å– |
| `season_id` | å­—ç¬¦ä¸² | æ˜¯ | åˆé›†ID | ä»åˆé›†é¡µé¢URLè·å– |

### 3. é…ç½®ç¤ºä¾‹

#### å•è§†é¢‘ä¸‹è½½é…ç½®
```
[DEFAULT]
ddown_path = D:/Programs/BBDown/BBDown.exe
cookie = your_actual_cookie_here
bvid = xxxxxx
season_download = 0
current_only = 1
audio_only = 1
```
#### åˆé›†ä¸‹è½½é…ç½®
```
[DEFAULT] 
ddown_path = D:/Programs/BBDown/BBDown.exe 
cookie = your_actual_cookie_here 
bvid = xxxxxx 
mid = 123456 
season_id = 789012 
season_download = 1 
current_only = 1 
audio_only = 1
```

## å¦‚ä½•è·å–é…ç½®å‚æ•°

### 1. è·å–BBDownè·¯å¾„
- ä¸‹è½½BBDownå¯æ‰§è¡Œæ–‡ä»¶
- è®°å½•å…¶å®Œæ•´è·¯å¾„ï¼Œå¦‚ï¼š`D:/Programs/BBDown/BBDown.exe`

### 2. è·å–Bç«™Cookie
1. ç™»å½•Bç«™ç½‘é¡µç‰ˆ
2. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·
3. åˆ‡æ¢åˆ°Networkæ ‡ç­¾
4. åˆ·æ–°é¡µé¢
5. æ‰¾åˆ°ä»»æ„è¯·æ±‚ï¼Œå¤åˆ¶Request Headersä¸­çš„Cookieå€¼

### 3. è·å–è§†é¢‘BVå·
- è§†é¢‘URLä¸­çš„BVå·éƒ¨åˆ†
- ä¾‹å¦‚ï¼š`https://www.bilibili.com/video/BV1nx4y1471a/` ä¸­çš„ `BV1nx4y1471a`

### 4. è·å–åˆé›†ä¿¡æ¯
> åˆé›†ä¿¡æ¯é€šè¿‡[è·å–è§†é¢‘åˆé›†ä¿¡æ¯æ¥å£](https://socialsisteryi.github.io/bilibili-API-collect/docs/video/collection.html#%E8%8E%B7%E5%8F%96%E8%A7%86%E9%A2%91%E5%90%88%E9%9B%86%E4%BF%A1%E6%81%AF)è·å–

#### è·å–UPä¸»ID(mid)
- UPä¸»ä¸»é¡µURLï¼š`https://space.bilibili.com/36726920`
- IDä¸ºï¼š`36726920`

#### è·å–åˆé›†ID(season_id)
- åˆé›†é¡µé¢URLï¼š`https://space.bilibili.com/36726920/channel/seriesdetail?sid=1133970`
- IDä¸ºï¼š`1133970`

## æ ¼å¼è½¬æ¢

ä¸‹è½½çš„éŸ³é¢‘æ–‡ä»¶æ˜¯ `m4a` æ ¼å¼ï¼Œå¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤è½¬æˆ `mp3`
```
# ç›´æ¥ä¿®æ”¹åç¼€åï¼Œäº²æµ‹å¯ç”¨ï¼Œé€Ÿåº¦å¿«
for %f in (*.m4a) do ren "%f" "%~nf.mp3"

# é‡‡ç”¨ ffmpeg è½¬æ¢ï¼Œäº²æµ‹å¯ç”¨ï¼Œé€Ÿåº¦æ…¢
for %i in (*.m4a) do ffmpeg -i "%i" -acodec libmp3lame -q:a 2 "%~ni.mp3"
```